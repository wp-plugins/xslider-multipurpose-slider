function getDraggableConfig(e,t,o,i){return t?(o=parseInt(o),i=parseInt(i),{drag:function(t,n){if(e.locked)return!1;var r=jQuery(n.helper[0]),a=r.outerWidth(),l=r.outerHeight(),s=n.position.top%i;s>i/2&&(s=i-s);var d=i-(n.position.top+l)%i;d>i/2&&(d=i-d),n.position.top=d>s?i*Math.round(n.position.top/i):i*Math.round((n.position.top+l)/i)-l;var p=n.position.left%o;p>o/2&&(p=o-p);var c=o-(n.position.left+l)%o;c>o/2&&(c=o-c),n.position.left=c>p?o*Math.round(n.position.left/o):o*Math.round((n.position.left+a)/o)-a,e.$apply(function(){e.onDrag({ui:n})})}}):{drag:function(t,o){return e.locked?!1:void e.$apply(function(){e.onDrag({ui:o})})}}}var xUtils=new function(){this.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e))+e},this.openMediaLibrary=function(e){void 0===typeof e.title&&(e.title="Media Library"),void 0===typeof e.multiple&&(e.multiple=!1),void 0===typeof e.buttonText&&(e.buttonText="insert");var t=wp.media({title:e.title,multiple:e.multiple,library:{type:e.type},button:{text:e.buttonText}});t.on("select",function(){var o=t.state().get("selection").first().toJSON(),i=t.state().get("selection"),n=[];1==e.multiple?(i.map(function(e){var t=e.toJSON();n.push(t)}),e.callback(n)):e.callback(o)}),t.on("close",function(){"undefined"!=typeof e.onClose&&e.onClose()}),t.open()},this.findArrayObject=function(e,t){var o,i;for(i in e){o=!0;for(var n in t)e[i][n]!=t[n]&&(o=!1);if(o)return i}return!1}};Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,o=Number(arguments[1])||0;for(o=0>o?Math.ceil(o):Math.floor(o),0>o&&(o+=t);t>o;o++)if(o in this&&this[o]===e)return o;return-1});var app=angular.module("app",["ngSanitize","ui-rangeSlider","ui.sortable","angularSpectrumColorpicker","ui.ace"]);app.filter("unsafe",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),app.filter("nl2br",function(){return function(e,t){return t?e?e.replace(/\n/g,"<br>"):"":e}}),app.filter("removeStr",function(){return function(e,t){return e.replace(t,"")}}),app.config(["$httpProvider",function(e){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="0"}]),app.filter("trustAsResourceUrl",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),app.directive("videoAttributes",function(){return{scope:{list:"=videoAttributes"},link:function(e,t){1==e.list.controls?t.attr("controls",""):t.removeAttr("controls"),""!=e.list.posterUrl&&t.attr("poster",e.list.posterUrl),e.$watch("list.controls",function(e){1==e?t.attr("controls",""):t.removeAttr("controls")},!0)}}}),app.directive("watchTest",function(){return{restrict:"E",scope:{val:"="},link:function(e){e.$watch("val",function(){},!0)}}}),app.factory("constants",function(){return{}}),app.factory("selectValues",function(){return{booleans:[{label:"Yes",value:!0},{label:"No",value:!1}],onoff:[{label:"On",value:!0},{label:"Off",value:!1}]}}),app.factory("defaults",function(){return{project:{id:0,name:"- no name -",width:960,height:540,layout:"responsive",layoutMaxWidth:"",layoutMinWidth:"",layoutSlideContainer:"responsive",layoutSlideContainerMaxWidth:"",layoutSlideContainerMinWidth:"",layoutSlide:"responsive",layoutSlideMaxWidth:"",layoutSlideMinWidth:"",bgType:"color",bgColor:"#ffffff",bgUrl:"",bgFit:"",bgPosition:"center center",bgRepeat:"repeat",perspective:600,enableParallax:!0,parallaxArea:"window",enableKeyboard:!0,start:"ready",visibleTreshold:200,delay:0,css:"",cssImportant:!0,runtime:{},ui:{showDots:!0,showArrows:!0,showGrid:!1,gridWidth:30,gridHeight:30,gridColor:"#fdc400",snapToGrid:!1,arrowsMove:!0,showProjectSettings:!1,projectSettingsPanels:{embed:!1},projectPanels:{elements:!0},slidePanels:{slide:!0},elementPanels:{element:!0}},preload:{image:!1,imageUrl:"",imageWidth:0,imageHeight:0,imagePosition:"center_center",imageVerticalOffset:0,imageHorizontalOffset:0,fontFamilyName:"",fontFamily:"Arial, Helvetica, sans-serif",fontSize:20,lineHeight:40,letterSpacing:0,fontWeight:400,fontStyle:"normal",textDecoration:"none",color:"#000",shadowH:0,shadowV:0,shadowBlur:0,shadowColor:"#000",bgColor:"#fff",barColor:"#000",barHeight:1,barPosition:"center",barOffset:0,responsiveBar:!1,textPosition:"center_center",textVerticalOffset:0,textHorizontalOffset:0,responsiveText:!0},arrows:{source:"icon",type:"fa-angle-right",size:80,responsive:!1,alwaysVisible:!1,showTime:.3,hideTime:.3,overTime:.3,outTime:.3,color:"#ffffff",colorHover:"#f0f0f0",shadowH:1,shadowV:1,shadowBlur:5,shadowColor:"rgba(0,0,0,0.5)",container:{bgColor:"",bgColorHover:"",paddingTop:10,paddingRight:10,paddingBottom:10,paddingLeft:10,borderStyle:"solid",borderWidth:"0",borderColor:"#000",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,shadowH:0,shadowV:0,shadowBlur:0,shadowColor:"#000"},positionPreset:"center_sides",position:{borderDistanceTop:20,borderDistanceRight:20,borderDistanceBottom:20,borderDistanceLeft:20,elementsDistance:10,left:{},right:{}}},dots:{source:"icon",iconOff:"fa-circle-o",iconOn:"fa-circle",size:20,minSize:12,maxSize:30,responsive:!1,alwaysVisible:!1,showTime:.3,hideTime:.3,overTime:.2,outTime:.2,color:"#ffffff",colorHover:"#f0f0f0",shadowH:1,shadowV:1,shadowBlur:5,shadowColor:"rgba(0,0,0,0.5)",position:{type:"bottom_center",borderDistanceTop:20,borderDistanceRight:20,borderDistanceBottom:20,borderDistanceLeft:20,elementsDistance:6}},mobile:{disableOnMobile:!1,disableOnIPad:!1,hideArrowsOnMobile:!1,hideArrowsOnIPad:!1,hideDotsOnMobile:!1,hideDotsOnIPad:!1,enableTouch:!0,threshold:60,maxTimeThreshold:5e3,pageScroll:"vertical",fallbackToMouseEvents:!0},slides:[]},slide:{name:"- no name - ",time:8,atTheEnd:"gotoNext",fx:"enter.slideRight",fxTime:1,bgType:"color",bgColor:"#dddddd",bgUrl:"",bgFit:"cover",bgPosition:"center center",bgRepeat:"no-repeat",overlay:!1,ken:!1,kenTime:8,kenDelay:0,kenStartScale:1,kenEndScale:1.2,kenStartRotationZ:0,kenEndRotationZ:5,kenOriginX:50,kenOriginY:50,kenEasing:"Linear.easeNone",elements:[]},emptyContainer:{overflow:"visible",opacity:1,rotationX:0,rotationY:0,rotationZ:0,borderStyle:"solid",borderWidth:"0",borderColor:"#000",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,bgType:"none",bgUrl:"",bgFit:"cover",bgPosition:"center center",bgRepeat:"no-repeat",shadowH:0,shadowV:0,shadowBlur:0,shadowColor:"#000"},startingAnimations:[{type:"enter",effect:"enter.slideLeft",start:0,end:.15,splitDelay:50},{type:"exit",effect:"exit.slideLeft",start:.85,end:1,splitDelay:50},{type:"cue",effect:"none",start:.35,end:.65,splitDelay:50}],startingInteractivity:{mouseOver:{effect:"none",time:.5},mouseOut:{time:.5},click:{action:"",js:"// type here your javascript code\n\n",target:"_blank"}},elementText:{name:"text",type:"text",visible:!0,start:0,end:1,left:50,top:50,parallaxLevel:0,loopEffect:"none",loopSpeed:50,animations:[],container:{},text:{contentType:"plain",content:"your text here",tag:"div",opacity:1,fontFamilyName:"arial",fontFamily:"Arial, Helvetica, sans-serif",whiteSpace:"pre",nl2br:!0,fontSize:30,lineHeight:30,letterSpacing:0,fontWeight:400,fontStyle:"normal",textDecoration:"none",textAlign:"left",color:"#000",textDecoration:"none",rotationX:0,rotationY:0,rotationZ:0,borderStyle:"solid",borderSize:0,borderColor:"#000",borderRadius:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,shadowH:0,shadowV:0,shadowBlur:0,shadowColor:"#555",split:""},interactivity:{}},elementFontIcon:{name:"icon",type:"fontIcon",visible:!0,locked:!1,start:0,end:1,left:50,top:50,parallaxLevel:0,loopEffect:"none",loopSpeed:50,animations:[],container:{},fontIcon:{content:"",icon:"",transform:"",opacity:1,fontSize:60,lineHeight:60,color:"#000",rotationX:0,rotationY:0,rotationZ:0,borderStyle:"solid",borderSize:0,borderColor:"#000",borderRadius:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,shadowH:0,shadowV:0,shadowBlur:0,shadowColor:"#555"},interactivity:{}},elementImage:{name:"image",type:"image",visible:!0,start:0,end:1,left:50,top:50,parallaxLevel:0,loopEffect:"none",loopSpeed:50,animations:[],image:{width:0,height:0,altTag:"",aspectRatio:!0,opacity:1,shadowH:0,shadowV:0,shadowBlur:0,shadowColor:"#555",rotationX:0,rotationY:0,rotationZ:0},container:{},interactivity:{}},elementYoutube:{name:"youtube",type:"youtube",visible:!0,start:0,end:1,left:50,top:50,parallaxLevel:0,loopEffect:"none",loopSpeed:50,animations:[],youtube:{code:"",width:480,height:270,controls:1,showInfo:0,autoplay:1,opacity:1,shadowH:0,shadowV:0,shadowBlur:0,shadowColor:"#555",rotationX:0,rotationY:0,rotationZ:0},container:{},interactivity:{}},elementVimeo:{name:"vimeo",type:"vimeo",visible:!0,start:0,end:1,left:50,top:50,parallaxLevel:0,loopEffect:"none",loopSpeed:50,animations:[],vimeo:{code:"",width:480,height:270,title:0,byline:0,badge:0,fullscreen:1,controlsColor:"00adef",autoplay:1,opacity:1,shadowH:0,shadowV:0,shadowBlur:0,shadowColor:"#555",rotationX:0,rotationY:0,rotationZ:0},container:{},interactivity:{}},elementVideo:{name:"html5 video",type:"video",visible:!0,start:0,end:1,left:50,top:50,parallaxLevel:0,loopEffect:"none",loopSpeed:50,animations:[],video:{code:"",width:480,height:270,posterSource:"library",posterUrl:"",posterName:"",mp4Source:"library",mp4Url:"",mp4Name:"",webmSource:"library",webmUrl:"",webmName:"",ogvSource:"library",ogvUrl:"",ogvName:"",autoplay:1,playPauseOnClick:0,loop:1,preload:"auto",controls:1,mute:0,opacity:1,shadowH:0,shadowV:0,shadowBlur:0,shadowColor:"#555",rotationX:0,rotationY:0,rotationZ:0},container:{},interactivity:{}},elementEmpty:{name:"empty",type:"empty",visible:!0,start:0,end:1,left:50,top:50,parallaxLevel:0,loopEffect:"none",loopSpeed:50,animations:[],container:{},empty:{width:200,height:100},interactivity:{}},elementCustom:{name:"custom",type:"custom",visible:!0,start:0,end:1,left:50,top:50,parallaxLevel:0,loopEffect:"none",loopSpeed:50,animations:[],container:{},custom:{html:"",css:"",js:""},interactivity:{}}}}),app.factory("shared",function(){return{sub:""}}),app.factory("user",function(){return{firstLogin:!1,logged:!1,usedCodes:0,isFinalDrawComplete:!1,isSkillBasedComplete:!1,skillBasedPersonalRecords:[]}}),app.directive("resizable",function(){return{restrict:"A",scope:{aspectRatio:"=",onResize:"&onResize"},link:function(e,t){var o={handles:"se",aspectRatio:!0,minWidth:1,minHeight:1};t.resizable(o),t.on("resize",function(t,o){e.onResize&&e.$apply(function(){e.onResize({ui:o})})}),e.$watch("aspectRatio",function(e){o.aspectRatio=e,t.resizable("destroy").resizable(o)})}}}),app.directive("draggable",function(){return{restrict:"A",scope:{snapToGrid:"=",gridWidth:"=",gridHeight:"=",locked:"=",onDrag:"&"},replace:!0,link:function(e,t){t.draggable(getDraggableConfig(e,e.snapToGrid,e.gridWidth,e.gridHeight)),e.$watch("snapToGrid",function(){t.draggable("destroy").draggable(getDraggableConfig(e,e.snapToGrid,e.gridWidth,e.gridHeight))}),e.$watch("gridWidth",function(){t.draggable("destroy").draggable(getDraggableConfig(e,e.snapToGrid,e.gridWidth,e.gridHeight))}),e.$watch("gridHeight",function(){t.draggable("destroy").draggable(getDraggableConfig(e,e.snapToGrid,e.gridWidth,e.gridHeight))})}}}),app.directive("islider",function(){return{require:"ngModel",restrict:"E",replace:!0,template:'<div style="margin-left:8px; margin-right:5px; width:100px; display:inline-block"></div>',scope:{min:"=",max:"=",step:"=",ngSliderChange:"&"},link:function(e,t,o,i){t.slider({step:.01,slide:function(){}}),t.bind("slide",function(t,o){e.$apply(function(){i.$setViewValue(o.value),e.ngSliderChange({value:o.value})})}),e.$watch(function(){return i.$modelValue},function(e){t.slider("option","value",e)}),e.$watch("min",function(e){t.slider("option","min",e)}),e.$watch("max",function(e){t.slider("option","max",e)}),e.$watch("step",function(e){t.slider("option","step",e)})}}});